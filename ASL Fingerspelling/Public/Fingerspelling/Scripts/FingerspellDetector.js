// -----JS CODE-----
// FingerspellDetector.js
// by SignAll https://www.signall.us/
// Runs ML model and processes its output to detect signs of American Sign Language alphabet 

//@input Asset.MLAsset model
// @input int numericMode = 1 {"label": "Mode", "widget" : "combobox", "values" : [{"label" : "0..9", "value" : "0"}, {"label" : "A..Z", "value" : "1"}]}
// @input bool printLog = true;
// @ui {"widget": "separator"}
// @input bool settings
// @ui {"widget":"group_start", "label" : "Settings:", "showIf": "settings"}
// @input float threshold = 0.5 {"widget":"slider", "min":0, "max":1, "step":0.01}
// @input int minOccurrence = 4 {"widget":"slider", "min":4, "max":15, "step":1}
// @input int repeatAfter = 10 {"widget":"slider", "min":0, "max":90, "step":5}
// @input bool advanced = advanced {"showIf" : "advanced"}
// @input bool enableZDetection {"label": "Enable Z Detection", "showIf" : "advanced"}
// @input int zDetectionInterval = 400 {"widget":"slider", "min":1000, "max":10000, "step":500, "showIf" : "advanced"}
// @input int zAverageWindow = 200 {"widget":"slider", "min":100, "max":200, "step":10,"showIf" : "advanced"}

// @ui {"widget":"group_end"}
// @ui {"widget" : "separator"}
// @input bool tracking
//@input Component.Camera camera {"showIf": "tracking"}
// @ui {"widget":"group_start", "label" : "Joints:", "showIf": "tracking"}

// @input Component.ObjectTracking Center 
// @input Component.ObjectTracking Wrist 
// @ui {"widget" : "separator"}
// @input Component.ObjectTracking Index0 
// @input Component.ObjectTracking Index1 
// @input Component.ObjectTracking Index2 
// @input Component.ObjectTracking Index3
// @ui {"widget" : "separator"}
// @input Component.ObjectTracking Middle0 
// @input Component.ObjectTracking Middle1 
// @input Component.ObjectTracking Middle2 
// @input Component.ObjectTracking Middle3 
// @ui {"widget" : "separator"}
// @input Component.ObjectTracking Ring0  
// @input Component.ObjectTracking Ring1 
// @input Component.ObjectTracking Ring2 
// @input Component.ObjectTracking Ring3 
// @ui {"widget" : "separator"}
// @input Component.ObjectTracking Pinky0 
// @input Component.ObjectTracking Pinky1 
// @input Component.ObjectTracking Pinky2  
// @input Component.ObjectTracking Pinky3 
// @ui {"widget" : "separator"}
// @input Component.ObjectTracking Thumb0 
// @input Component.ObjectTracking Thumb1 
// @input Component.ObjectTracking Thumb2 
// @input Component.ObjectTracking Thumb3 
// @ui {"widget":"group_end"}

/* eslint-disable */
function Util_(){this.enumcnt=-1}Util_.prototype={levenshteinDistance:function levenshteinDistance(t,e){Util.assert("string"==typeof t),Util.assert("string"==typeof e);const r=t.length,i=e.length;for(var n=new Array(r+1),a=0;a<r+1;++a){n[a]=new Array(i+1);for(var l=0;l<i+1;++l)n[a][l]=0}for(a=1;a<r+1;++a)n[a][0]=a;for(l=1;l<i+1;++l)n[0][l]=l;for(l=1;l<i+1;++l)for(a=1;a<r+1;++a){var _=0;t[a-1]!=e[l-1]&&(_=1),n[a][l]=Math.min(n[a-1][l]+1,n[a][l-1]+1,n[a-1][l-1]+_)}return n[r][i]},removePrefix:function removePrefix(t,e){return Util.assert("string"==typeof t,Util.myTypeOf(t)),Util.assert("string"==typeof e),t.length>=e.length&&t.substr(0,e.length)==e?t.substr(e.length):t},arrayToStr:function arrayToStr(t,e){var r="";for(var i in t){if(void 0!==e&&i>=e)break;var n=i%3==2;r+=" "+Util.pad(t[i].toPrecision(3),n?8:4,!0)}return r},accumulate:function accumulate(t,e,r){for(var i in Util.assert(t instanceof Array||"string"==typeof t,Util.myTypeOf(t)),t)e=r(e,t[i]);return e},count_if:function count_if(t,e){Util.assert(t instanceof Array,Util.myTypeOf(t));var r=0;for(var i in t)e(t[i])&&++r;return r},count_if_circBuf:function count_if_circBuf(t,e){Util.assert(t instanceof CircularBuffer,Util.myTypeOf(t));for(var r=0,i=0;i<t.size();++i)e(t.get(i))&&++r;return r},all_of:function all_of(t,e){var r=!0;for(var i in t){if(!e(t[i])){r=!1;break}}return r},pad:function pad(t,e,r){void 0===e&&(e=8);for(var i=""+t,n=Math.max(0,e-i.length),a=i;n--;)a+=" ";return 1==r&&a.length>e?a.substr(0,e):a},xor:function xor(t,e){return t&&!e||!t&&e},myTypeOf:function myTypeOf(t){var e=typeof t;return"object"==e?void 0!==t.class_name?t.class_name:t.constructor.name:e},isObject:function isObject(t){return"object"==typeof t},isType:function isType(t,e){return Util.assert(void 0!==e,"typeName is not given"),Util.myTypeOf(t).toLowerCase()==e.toLowerCase()},isOptType:function isOptType(t,e){return Util.assert(void 0!==e,"typeName is not given"),void 0===t||Util.isType(t,e)},isHolderOf:function isHolderOf(t,e){return Util.assert(void 0!==e,"typeName is not given"),Util.isType(t,"holder")&&t.typeName==e},isArrayOf:function isArrayOf(t,e){return Util.assert(void 0!==e,"typeName is not given"),!(t instanceof Array)||0==t.length||Util.isType(t[0],e)},isArrayOfObject:function isArrayOfObject(t){return!(t instanceof Array)||0==t.length||Util.isObject(t[0])},arrayTypeOf:function arrayTypeOf(t){return t instanceof Array?t.length>0?Util.myTypeOf(t[0]):"empty array":"not array"},copyArray:function copyArray(t){Util.assert(t instanceof Array,Util.myTypeOf(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e},assert:function assert(t,e){0==t&&Util.fatal(void 0!==e?"Util.assert: "+e:"(Util.assert)")},filter:function filter(t,e){Util.assert(Util.isType(t,"array"));var r=[];for(var i in t)e(t[i])&&r.push(t[i]);return r},find:function find(t,e){var r=Util.findIndex(t,e);return r>=0?t[r]:void 0},findIndex:function findIndex(t,e){Util.assert(Util.isType(t,"array")||Util.isType(t,"string"),Util.myTypeOf(t));for(var r=0;r<t.length;++r)if(e(t[r]))return r;return-1},findIndex_circBuf:function findIndex_circBuf(t,e){Util.assert(Util.isType(t,"CircularBuffer"));for(var r=0;r<t.size();++r)if(e(t.get(r)))return r;return-1},findLastIndex_circBuf:function findLastIndex_circBuf(t,e){Util.assert(Util.isType(t,"CircularBuffer"));for(var r=t.size()-1;r>=0;--r)if(e(t.get(r)))return r;return-1},dumpArr:function dumpArr(t,e,r){Util.assert(Util.isType(t,"array")),void 0===e&&(e=function(t){return t});for(var i=(void 0!==r?r:"")+"|"+t.length+"|: ",n=0;n<t.length;++n)i+=(n>0?",":"")+e(t[n],n);Util.log(i)},desc:function desc(s,that){return s+" = "+eval(s)},flattenVec2Arr:function flattenVec2Arr(t,e){var r=t.length;void 0===e?e=new Array(2*r):Util.assert(e.length==2*t.length);for(var i=0;i<r;++i)e[2*i]=t[i].x,e[2*i+1]=t[i].y},flattenVec2Arr_withOffset:function flattenVec2Arr_withOffset(t,e,r){var i=t.length;Util.assert(Util.isType(e,"array"));for(var n=0;n<i;++n)e[r+2*n]=t[n].x,e[r+2*n+1]=t[n].y},prec:function prec(t,e){Util.assert(Util.isType(t,"number")),Util.assert(Util.isType(e,"number")),Util.assert(Util.isType(t,"number"));const r=Math.pow(10,e);return Math.round(t*r)/r},vec2set:function vec2set(t,e,r){Util.isObject(e)&&void 0===r?(t.x=0+e.x,t.y=0+e.y):Util.isType(e,"number")&&Util.isType(r,"number")&&(t.x=0+e,t.y=0+r)},vec2clone:function vec2clone(t){return new vec2(t.x,t.y)},log:function(t){script.printLog&&print(t)}};var Util=new Util_,M_PI=3.1415926535;const EPSILON=1e-9,FingerspellRecognitionMode={DictionaryMatching:0,Learn:1},HandSide={LEFT:0,RIGHT:1,NOT_DEFINED:2},HandLandmarkType={WRIST:0,THUMB_0:1,THUMB_1:2,THUMB_2:3,THUMB_3:4,INDEX_0:5,INDEX_1:6,INDEX_2:7,INDEX_3:8,MIDDLE_0:9,MIDDLE_1:10,MIDDLE_2:11,MIDDLE_3:12,RING_0:13,RING_1:14,RING_2:15,RING_3:16,PINKY_0:17,PINKY_1:18,PINKY_2:19,PINKY_3:20,HandLandmark_COUNT:21};function Pair(t,e){this.first=t,this.second=e}function Interval(t,e){this.begin=void 0!==t?t:-1,this.end=void 0!==e?e:-1}function Vec2Array(t){this.vectors=[],this.init(t)}function CircularBuffer(t,e){if(Util.assert(Util.isType(t,"number")),this.elements=new Array(t+1),this.maxSize=t+1,this.first=0,this.last=0,void 0!==e)for(var r=0;r<this.maxSize;++r)this.elements[r]=e()}function MovingAverage(t){Util.assert(void 0===t||"number"==typeof t),this.queue=new CircularBuffer(t+2),this.sum=0,this.window=void 0!==t?t:10}function Holder(t,e){Util.assert("string"==typeof t,"typeName not given"),Util.assert(Util.isType(e,t),Util.myTypeOf(e)+" != "+t),this.typeName=t,this.value=e}function HandLandmarkHelper(){}function Classification(){this.index=-1,this.score=0,this.label=""}function TensorsToClassification(){this.label_map=[],this.min_score_threshold=script.threshold,this.init()}function JointPretransform(){}CircularBuffer.prototype={constructor:CircularBuffer.prototype.constructor,push_back:function push_back(t){this.elements[this.last]=t,this.last=(this.last+1)%this.maxSize,this.last==this.first&&(this.debug(),Util.fatal("CircularBuffer overflow, last="+this.last+", first="+this.first))},push_back_auto:function push_back_auto(t){this.full()&&this.remove_front(),this.push_back(t)},pop_front:function pop_front(){var t=this.elements[this.first];return this.first=(this.first+1)%this.maxSize,t},add_back:function add_back(){this.last=(this.last+1)%this.maxSize,this.last==this.first&&(this.debug(),Util.fatal("CircularBuffer overflow, last="+this.last+", first="+this.first))},add_back_auto:function add_back_auto(){this.full()&&this.remove_front(),this.add_back()},remove_front:function remove_front(){this.first=(this.first+1)%this.maxSize},pop_back:function pop_back(){return this.last=this.last>0?this.last-1:this.maxSize-1,this.elements[this.last]},empty:function empty(){return this.first==this.last},full:function full(){return(this.last+1)%this.maxSize==this.first},front:function front(){return this.empty()?void 0:this.elements[this.first]},getBackIdx:function getBackIdx(){return this.empty()?-1:this.last>0?this.last-1:this.maxSize-1},back:function back(){return this.empty()?void 0:this.elements[this.getBackIdx()]},debug:function debug(t){if(Util.log("first="+this.first+", last="+this.last+", maxSize="+this.maxSize+", max_size()="+this.max_size()+", size()="+this.size()+", empty()="+this.empty()+", full()="+this.full()),!0!==t){for(var e=0;e<this.maxSize;++e)Util.log(this.elements[e]+" "+(e==this.first?"F":"")+(e==this.last?"L":""));for(e=0;e<this.size();++e)Util.log("-> "+this.get(e))}},size:function size(){return this.first<=this.last?this.last-this.first:this.last-this.first+this.maxSize},max_size:function max_size(){return this.maxSize-1},clear:function clear(){this.first=this.last},get:function get(t){return Util.assert(Util.isType(t,"number")&&0<=t&&t<this.size()),this.elements[(this.first+t)%this.maxSize]},set:function set(t,e){Util.assert(Util.isType(t,"number")&&0<=t&&t<this.size()),this.elements[(this.first+t)%this.maxSize]=e},setBack:function setBack(t){Util.assert(-1!=this.getBackIdx()),this.elements[this.getBackIdx()]=t}},MovingAverage.prototype={constructor:MovingAverage.prototype.constructor,add:function add(t){Util.assert("number"==typeof t),this.queue.size()>this.window&&(this.sum-=this.queue.front(),this.queue.pop_front()),this.sum+=t,this.queue.push_back(t)},get:function get(){return this.queue.empty()?0:this.sum/this.queue.size()},getCount:function getCount(){return this.queue.size()},getSum:function getSum(){return this.sum}},Holder.prototype={constructor:Holder.prototype.constructor,set:function set(t){Util.assert(Util.isType(t,this.typeName),Util.myTypeOf(t)+" != "+this.typeName),this.value=t},get:function get(){return this.value}},HandLandmarkHelper.tensorMaxValue=224,HandLandmarkHelper.ShouldMirrorData=function ShouldMirrorData(t){return Util.assert("number"==typeof t),t==HandSide.LEFT},TensorsToClassification.prototype={constructor:TensorsToClassification.prototype.constructor,init:function init(){this.label_map=["ASL_0_NUM","ASL_1_BENT","ASL_25","ASL_2_NUM","ASL_3_CLOSED","ASL_3_NUM","ASL_4_MIR","ASL_4_NUM","ASL_5_CLAW","ASL_5_CLAW_THUMB_OUT","ASL_5_NUM","ASL_6_NUM","ASL_7_NUM","ASL_8_NUM","ASL_9_NUM","ASL_A","ASL_B","ASL_B_BENT_THUMB_OUT","ASL_B_THUMB_OUT","ASL_C","ASL_D","ASL_E","ASL_E_THUMB_OUT","ASL_FK","ASL_G","ASL_G_CLOSED","ASL_H","ASL_HORNS","ASL_I","ASL_ILY","ASL_J","ASL_K","ASL_L","ASL_M","ASL_N","ASL_O_FLAT","ASL_P","ASL_Q","ASL_R","ASL_R_THUMB_OUT","ASL_S","ASL_T","ASL_U","ASL_U_THUMB_FORWARD","ASL_U_THUMB_OUT","ASL_V_CIRCLE","ASL_X","ASL_X_OVER_THUMB","ASL_X_THUMB_OUT","ASL_Y"]},process:function process(t){Util.assert(t instanceof Float32Array);var e=t.length;Util.assert(0==this.label_map.length||e==this.label_map.length);for(var r=[],i=0;i<e;++i)if(!(t[i]<this.min_score_threshold)){var n=new Classification;n.index=i,n.score=t[i],0!=this.label_map.length&&(n.label=this.label_map[i]),r.push(n)}return r}},JointPretransform.prototype={constructor:JointPretransform.prototype.constructor,process:function process(t,e,r){Util.assert(Util.isType(t,"number")&&t!==HandSide.NOT_DEFINED),Util.assert(e.length==r.length,e.length+"!="+r.length),Util.assert(e.length>HandLandmarkType.RING_0);for(var i=e[HandLandmarkType.INDEX_0].add(e[HandLandmarkType.RING_0]).uniformScale(.5),n=0;n<r.length;++n)Util.vec2set(r[n],e[n].sub(i));var a=r[HandLandmarkType.INDEX_0].distance(r[HandLandmarkType.PINKY_0]),l=a<EPSILON?1:1/a;a<EPSILON&&Util.warning("fist width too small: "+a);for(n=0;n<r.length;++n)r[n].x*=l,r[n].y*=l;if(HandLandmarkHelper.ShouldMirrorData(t))for(n=0;n<r.length;++n)r[n].x*=-1;return r}};const FingerspellCharacter={UNKNOWN:Util.enumcnt=0,ASL_A:++Util.enumcnt,ASL_B:++Util.enumcnt,ASL_C:++Util.enumcnt,ASL_D:++Util.enumcnt,ASL_E:++Util.enumcnt,ASL_F:++Util.enumcnt,ASL_G:++Util.enumcnt,ASL_H:++Util.enumcnt,ASL_I:++Util.enumcnt,ASL_J:++Util.enumcnt,ASL_K:++Util.enumcnt,ASL_L:++Util.enumcnt,ASL_M:++Util.enumcnt,ASL_N:++Util.enumcnt,ASL_O:++Util.enumcnt,ASL_P:++Util.enumcnt,ASL_Q:++Util.enumcnt,ASL_R:++Util.enumcnt,ASL_S:++Util.enumcnt,ASL_T:++Util.enumcnt,ASL_U:++Util.enumcnt,ASL_V:++Util.enumcnt,ASL_W:++Util.enumcnt,ASL_X:++Util.enumcnt,ASL_Y:++Util.enumcnt,ASL_Z:++Util.enumcnt,ASL_0:++Util.enumcnt,ASL_1:++Util.enumcnt,ASL_2:++Util.enumcnt,ASL_3:++Util.enumcnt,ASL_4:++Util.enumcnt,ASL_5:++Util.enumcnt,ASL_6:++Util.enumcnt,ASL_7:++Util.enumcnt,ASL_8:++Util.enumcnt,ASL_9:++Util.enumcnt,ASL_10:++Util.enumcnt,ASL_1_BACK:++Util.enumcnt,ASL_2_BACK:++Util.enumcnt,ASL_3_BACK:++Util.enumcnt,ASL_4_BACK:++Util.enumcnt,ASL_5_BACK:++Util.enumcnt,META_B_DOWN:Util.enumcnt=1e3,META_A_THUMBOUT:++Util.enumcnt,META_B_BENT_IN:++Util.enumcnt,META_B_IN:++Util.enumcnt,META_B_IN_THUMBOUT:++Util.enumcnt,META_B_SIDE:++Util.enumcnt,META_B_SIDE_THUMBOUT:++Util.enumcnt,META_B_WAVE_IN:++Util.enumcnt,META_B_WAVE_IN_THUMBOUT:++Util.enumcnt,META_POINT_IN:++Util.enumcnt},sFc2Name={[FingerspellCharacter.UNKNOWN]:"UNKNOWN",[FingerspellCharacter.ASL_A]:"ASL_A",[FingerspellCharacter.ASL_B]:"ASL_B",[FingerspellCharacter.ASL_C]:"ASL_C",[FingerspellCharacter.ASL_D]:"ASL_D",[FingerspellCharacter.ASL_E]:"ASL_E",[FingerspellCharacter.ASL_F]:"ASL_F",[FingerspellCharacter.ASL_G]:"ASL_G",[FingerspellCharacter.ASL_H]:"ASL_H",[FingerspellCharacter.ASL_I]:"ASL_I",[FingerspellCharacter.ASL_J]:"ASL_J",[FingerspellCharacter.ASL_K]:"ASL_K",[FingerspellCharacter.ASL_L]:"ASL_L",[FingerspellCharacter.ASL_M]:"ASL_M",[FingerspellCharacter.ASL_N]:"ASL_N",[FingerspellCharacter.ASL_O]:"ASL_O",[FingerspellCharacter.ASL_P]:"ASL_P",[FingerspellCharacter.ASL_Q]:"ASL_Q",[FingerspellCharacter.ASL_R]:"ASL_R",[FingerspellCharacter.ASL_S]:"ASL_S",[FingerspellCharacter.ASL_T]:"ASL_T",[FingerspellCharacter.ASL_U]:"ASL_U",[FingerspellCharacter.ASL_V]:"ASL_V",[FingerspellCharacter.ASL_W]:"ASL_W",[FingerspellCharacter.ASL_X]:"ASL_X",[FingerspellCharacter.ASL_Y]:"ASL_Y",[FingerspellCharacter.ASL_Z]:"ASL_Z",[FingerspellCharacter.ASL_0]:"ASL_0",[FingerspellCharacter.ASL_1]:"ASL_1",[FingerspellCharacter.ASL_2]:"ASL_2",[FingerspellCharacter.ASL_3]:"ASL_3",[FingerspellCharacter.ASL_4]:"ASL_4",[FingerspellCharacter.ASL_5]:"ASL_5",[FingerspellCharacter.ASL_6]:"ASL_6",[FingerspellCharacter.ASL_7]:"ASL_7",[FingerspellCharacter.ASL_8]:"ASL_8",[FingerspellCharacter.ASL_9]:"ASL_9",[FingerspellCharacter.ASL_10]:"ASL_10",[FingerspellCharacter.ASL_1_BACK]:"ASL_1_BACK",[FingerspellCharacter.ASL_2_BACK]:"ASL_2_BACK",[FingerspellCharacter.ASL_3_BACK]:"ASL_3_BACK",[FingerspellCharacter.ASL_4_BACK]:"ASL_4_BACK",[FingerspellCharacter.ASL_5_BACK]:"ASL_5_BACK",[FingerspellCharacter.META_B_DOWN]:"META_B_DOWN",[FingerspellCharacter.META_A_THUMBOUT]:"META_A_THUMBOUT",[FingerspellCharacter.META_B_BENT_IN]:"META_B_BENT_IN",[FingerspellCharacter.META_B_IN]:"META_B_IN",[FingerspellCharacter.META_B_IN_THUMBOUT]:"META_B_IN_THUMBOUT",[FingerspellCharacter.META_B_SIDE]:"META_B_SIDE",[FingerspellCharacter.META_B_SIDE_THUMBOUT]:"META_B_SIDE_THUMBOUT",[FingerspellCharacter.META_B_WAVE_IN]:"META_B_WAVE_IN",[FingerspellCharacter.META_B_WAVE_IN_THUMBOUT]:"META_B_WAVE_IN_THUMBOUT",[FingerspellCharacter.META_POINT_IN]:"META_POINT_IN"};function isFingerspellCharacterNumber(t){Util.assert(Util.isType(t,"number"));const e=[FingerspellCharacter.ASL_0,FingerspellCharacter.ASL_1,FingerspellCharacter.ASL_2,FingerspellCharacter.ASL_3,FingerspellCharacter.ASL_4,FingerspellCharacter.ASL_5,FingerspellCharacter.ASL_6,FingerspellCharacter.ASL_7,FingerspellCharacter.ASL_8,FingerspellCharacter.ASL_9,FingerspellCharacter.ASL_10,FingerspellCharacter.ASL_1_BACK,FingerspellCharacter.ASL_2_BACK,FingerspellCharacter.ASL_3_BACK,FingerspellCharacter.ASL_4_BACK,FingerspellCharacter.ASL_5_BACK];return-1!=Util.findIndex(e,(function(e){return e==t}))}function FingerspellDetection(t,e){this.character=void 0!==t?t:FingerspellCharacter.UNKNOWN,this.confidence=void 0!==e?e:0}function FingerspellDetections(){this.all=[],this.best=new FingerspellDetection}FingerspellDetection.prototype={constructor:FingerspellDetection.prototype.constructor,isValid:function isValid(){return this.character!=FingerspellCharacter.UNKNOWN}}; const TfHandShape={UNINITIALIZED:-2,INVALID:-1,OTHER:0,ASL_0_NUM:Util.enumcnt=1,ASL_1_NUM:++Util.enumcnt,ASL_1_BENT:++Util.enumcnt,ASL_1_BENT_THUMB_OUT:++Util.enumcnt,ASL_2_NUM:++Util.enumcnt,ASL_3_NUM:++Util.enumcnt,ASL_3_CLOSED:++Util.enumcnt,ASL_4_NUM:++Util.enumcnt,ASL_5_NUM:++Util.enumcnt,ASL_5_CLAW:++Util.enumcnt,ASL_5_CLAW_THUMB_OUT:++Util.enumcnt,ASL_6_NUM:++Util.enumcnt,ASL_6_CLOSED:++Util.enumcnt,ASL_7_NUM:++Util.enumcnt,ASL_8_NUM:++Util.enumcnt,ASL_9_FLAT:++Util.enumcnt,ASL_9_NUM:++Util.enumcnt,ASL_10:++Util.enumcnt,ASL_25:++Util.enumcnt,ASL_A:++Util.enumcnt,ASL_B:++Util.enumcnt,ASL_B_FLAT:++Util.enumcnt,ASL_B_THUMB_OUT:++Util.enumcnt,ASL_B_BENT:++Util.enumcnt,ASL_B_BENT_THUMB_OUT:++Util.enumcnt,ASL_C:++Util.enumcnt,ASL_D:++Util.enumcnt,ASL_E:++Util.enumcnt,ASL_E_THUMB_OUT:++Util.enumcnt,ASL_G:++Util.enumcnt,ASL_G_CLOSED:++Util.enumcnt,ASL_G_INDEX_CURVED:++Util.enumcnt,ASL_G_OPEN:++Util.enumcnt,ASL_I:++Util.enumcnt,ASL_K:++Util.enumcnt,ASL_L:++Util.enumcnt,ASL_M:++Util.enumcnt,ASL_M_OPEN:++Util.enumcnt,ASL_N:++Util.enumcnt,ASL_N_OPEN:++Util.enumcnt,ASL_O_FLAT:++Util.enumcnt,ASL_R:++Util.enumcnt,ASL_R_THUMB_OUT:++Util.enumcnt,ASL_S:++Util.enumcnt,ASL_T:++Util.enumcnt,ASL_U:++Util.enumcnt,ASL_U_THUMB_FORWARD:++Util.enumcnt,ASL_U_THUMB_OUT:++Util.enumcnt,ASL_V_CIRCLE:++Util.enumcnt,ASL_X:++Util.enumcnt,ASL_X_OVER_THUMB:++Util.enumcnt,ASL_X_THUMB_OUT:++Util.enumcnt,ASL_Y:++Util.enumcnt,ASL_Y_OPEN:++Util.enumcnt,ASL_HORNS:++Util.enumcnt,ASL_ILY:++Util.enumcnt,ASL_E_OPEN:++Util.enumcnt,ASL_H:++Util.enumcnt,ASL_J:++Util.enumcnt,ASL_P:++Util.enumcnt,ASL_Q:++Util.enumcnt,ASL_Z:++Util.enumcnt,ASL_1_BACK:++Util.enumcnt,ASL_2_BACK:++Util.enumcnt,ASL_3_BACK:++Util.enumcnt,ASL_4_BACK:++Util.enumcnt,ASL_5_BACK:++Util.enumcnt,META_B_DOWN:++Util.enumcnt,META_A_THUMBOUT:++Util.enumcnt,META_B_BENT_IN:++Util.enumcnt,META_B_IN:++Util.enumcnt,META_B_IN_THUMBOUT:++Util.enumcnt,META_B_SIDE:++Util.enumcnt,META_B_SIDE_THUMBOUT:++Util.enumcnt,META_B_WAVE_IN:++Util.enumcnt,META_B_WAVE_IN_THUMBOUT:++Util.enumcnt,META_POINT_IN:++Util.enumcnt,ASL_6_BACK:++Util.enumcnt,ASL_7_BACK:++Util.enumcnt,ASL_8_BACK:++Util.enumcnt,ASL_9_BACK:++Util.enumcnt,ASL_4_MIR:++Util.enumcnt,ASL_4_MIR_BACK:++Util.enumcnt,ASL_FK:++Util.enumcnt,ASL_FK_BACK:++Util.enumcnt},sTfH2Name={[TfHandShape.UNINITIALIZED]:"UNINITIALIZED",[TfHandShape.INVALID]:"INVALID",[TfHandShape.OTHER]:"OTHER",[TfHandShape.ASL_0_NUM]:"ASL_0_NUM",[TfHandShape.ASL_1_NUM]:"ASL_1_NUM",[TfHandShape.ASL_1_BENT]:"ASL_1_BENT",[TfHandShape.ASL_1_BENT_THUMB_OUT]:"ASL_1_BENT_THUMB_OUT",[TfHandShape.ASL_2_NUM]:"ASL_2_NUM",[TfHandShape.ASL_3_NUM]:"ASL_3_NUM",[TfHandShape.ASL_3_CLOSED]:"ASL_3_CLOSED",[TfHandShape.ASL_4_NUM]:"ASL_4_NUM",[TfHandShape.ASL_5_NUM]:"ASL_5_NUM",[TfHandShape.ASL_5_CLAW]:"ASL_5_CLAW",[TfHandShape.ASL_5_CLAW_THUMB_OUT]:"ASL_5_CLAW_THUMB_OUT",[TfHandShape.ASL_6_NUM]:"ASL_6_NUM",[TfHandShape.ASL_6_CLOSED]:"ASL_6_CLOSED",[TfHandShape.ASL_7_NUM]:"ASL_7_NUM",[TfHandShape.ASL_8_NUM]:"ASL_8_NUM",[TfHandShape.ASL_9_FLAT]:"ASL_9_FLAT",[TfHandShape.ASL_9_NUM]:"ASL_9_NUM",[TfHandShape.ASL_10]:"ASL_10",[TfHandShape.ASL_25]:"ASL_25",[TfHandShape.ASL_A]:"ASL_A",[TfHandShape.ASL_B]:"ASL_B",[TfHandShape.ASL_B_FLAT]:"ASL_B_FLAT",[TfHandShape.ASL_B_THUMB_OUT]:"ASL_B_THUMB_OUT",[TfHandShape.ASL_B_BENT]:"ASL_B_BENT",[TfHandShape.ASL_B_BENT_THUMB_OUT]:"ASL_B_BENT_THUMB_OUT",[TfHandShape.ASL_C]:"ASL_C",[TfHandShape.ASL_D]:"ASL_D",[TfHandShape.ASL_E]:"ASL_E",[TfHandShape.ASL_E_THUMB_OUT]:"ASL_E_THUMB_OUT",[TfHandShape.ASL_G]:"ASL_G",[TfHandShape.ASL_G_CLOSED]:"ASL_G_CLOSED",[TfHandShape.ASL_G_INDEX_CURVED]:"ASL_G_INDEX_CURVED",[TfHandShape.ASL_G_OPEN]:"ASL_G_OPEN",[TfHandShape.ASL_I]:"ASL_I",[TfHandShape.ASL_K]:"ASL_K",[TfHandShape.ASL_L]:"ASL_L",[TfHandShape.ASL_M]:"ASL_M",[TfHandShape.ASL_M_OPEN]:"ASL_M_OPEN",[TfHandShape.ASL_N]:"ASL_N",[TfHandShape.ASL_N_OPEN]:"ASL_N_OPEN",[TfHandShape.ASL_O_FLAT]:"ASL_O_FLAT",[TfHandShape.ASL_R]:"ASL_R",[TfHandShape.ASL_R_THUMB_OUT]:"ASL_R_THUMB_OUT",[TfHandShape.ASL_S]:"ASL_S",[TfHandShape.ASL_T]:"ASL_T",[TfHandShape.ASL_U]:"ASL_U",[TfHandShape.ASL_U_THUMB_FORWARD]:"ASL_U_THUMB_FORWARD",[TfHandShape.ASL_U_THUMB_OUT]:"ASL_U_THUMB_OUT",[TfHandShape.ASL_V_CIRCLE]:"ASL_V_CIRCLE",[TfHandShape.ASL_X]:"ASL_X",[TfHandShape.ASL_X_OVER_THUMB]:"ASL_X_OVER_THUMB",[TfHandShape.ASL_X_THUMB_OUT]:"ASL_X_THUMB_OUT",[TfHandShape.ASL_Y]:"ASL_Y",[TfHandShape.ASL_Y_OPEN]:"ASL_Y_OPEN",[TfHandShape.ASL_HORNS]:"ASL_HORNS",[TfHandShape.ASL_ILY]:"ASL_ILY",[TfHandShape.ASL_E_OPEN]:"ASL_E_OPEN",[TfHandShape.ASL_H]:"ASL_H",[TfHandShape.ASL_J]:"ASL_J",[TfHandShape.ASL_P]:"ASL_P",[TfHandShape.ASL_Q]:"ASL_Q",[TfHandShape.ASL_Z]:"ASL_Z",[TfHandShape.ASL_1_BACK]:"ASL_1_BACK",[TfHandShape.ASL_2_BACK]:"ASL_2_BACK",[TfHandShape.ASL_3_BACK]:"ASL_3_BACK",[TfHandShape.ASL_4_BACK]:"ASL_4_BACK",[TfHandShape.ASL_5_BACK]:"ASL_5_BACK",[TfHandShape.META_B_DOWN]:"META_B_DOWN",[TfHandShape.META_A_THUMBOUT]:"META_A_THUMBOUT",[TfHandShape.META_B_BENT_IN]:"META_B_BENT_IN",[TfHandShape.META_B_IN]:"META_B_IN",[TfHandShape.META_B_IN_THUMBOUT]:"META_B_IN_THUMBOUT",[TfHandShape.META_B_SIDE]:"META_B_SIDE",[TfHandShape.META_B_SIDE_THUMBOUT]:"META_B_SIDE_THUMBOUT",[TfHandShape.META_B_WAVE_IN]:"META_B_WAVE_IN",[TfHandShape.META_B_WAVE_IN_THUMBOUT]:"META_B_WAVE_IN_THUMBOUT",[TfHandShape.META_POINT_IN]:"META_POINT_IN",[TfHandShape.ASL_6_BACK]:"ASL_6_BACK",[TfHandShape.ASL_7_BACK]:"ASL_7_BACK",[TfHandShape.ASL_8_BACK]:"ASL_8_BACK",[TfHandShape.ASL_9_BACK]:"ASL_9_BACK",[TfHandShape.ASL_4_MIR]:"ASL_4_MIR",[TfHandShape.ASL_4_MIR_BACK]:"ASL_4_MIR_BACK",[TfHandShape.ASL_FK]:"ASL_FK",[TfHandShape.ASL_FK_BACK]:"ASL_FK_BACK"},sName2TfH={UNINITIALIZED:TfHandShape.UNINITIALIZED,INVALID:TfHandShape.INVALID,OTHER:TfHandShape.OTHER,ASL_0_NUM:TfHandShape.ASL_0_NUM,ASL_1_NUM:TfHandShape.ASL_1_NUM,ASL_1_BENT:TfHandShape.ASL_1_BENT,ASL_1_BENT_THUMB_OUT:TfHandShape.ASL_1_BENT_THUMB_OUT,ASL_2_NUM:TfHandShape.ASL_2_NUM,ASL_3_NUM:TfHandShape.ASL_3_NUM,ASL_3_CLOSED:TfHandShape.ASL_3_CLOSED,ASL_4_NUM:TfHandShape.ASL_4_NUM,ASL_5_NUM:TfHandShape.ASL_5_NUM,ASL_5_CLAW:TfHandShape.ASL_5_CLAW,ASL_5_CLAW_THUMB_OUT:TfHandShape.ASL_5_CLAW_THUMB_OUT,ASL_6_NUM:TfHandShape.ASL_6_NUM,ASL_6_CLOSED:TfHandShape.ASL_6_CLOSED,ASL_7_NUM:TfHandShape.ASL_7_NUM,ASL_8_NUM:TfHandShape.ASL_8_NUM,ASL_9_FLAT:TfHandShape.ASL_9_FLAT,ASL_9_NUM:TfHandShape.ASL_9_NUM,ASL_10:TfHandShape.ASL_10,ASL_25:TfHandShape.ASL_25,ASL_A:TfHandShape.ASL_A,ASL_B:TfHandShape.ASL_B,ASL_B_FLAT:TfHandShape.ASL_B_FLAT,ASL_B_THUMB_OUT:TfHandShape.ASL_B_THUMB_OUT,ASL_B_BENT:TfHandShape.ASL_B_BENT,ASL_B_BENT_THUMB_OUT:TfHandShape.ASL_B_BENT_THUMB_OUT,ASL_C:TfHandShape.ASL_C,ASL_D:TfHandShape.ASL_D,ASL_E:TfHandShape.ASL_E,ASL_E_THUMB_OUT:TfHandShape.ASL_E_THUMB_OUT,ASL_G:TfHandShape.ASL_G,ASL_G_CLOSED:TfHandShape.ASL_G_CLOSED,ASL_G_INDEX_CURVED:TfHandShape.ASL_G_INDEX_CURVED,ASL_G_OPEN:TfHandShape.ASL_G_OPEN,ASL_I:TfHandShape.ASL_I,ASL_K:TfHandShape.ASL_K,ASL_L:TfHandShape.ASL_L,ASL_M:TfHandShape.ASL_M,ASL_M_OPEN:TfHandShape.ASL_M_OPEN,ASL_N:TfHandShape.ASL_N,ASL_N_OPEN:TfHandShape.ASL_N_OPEN,ASL_O_FLAT:TfHandShape.ASL_O_FLAT,ASL_R:TfHandShape.ASL_R,ASL_R_THUMB_OUT:TfHandShape.ASL_R_THUMB_OUT,ASL_S:TfHandShape.ASL_S,ASL_T:TfHandShape.ASL_T,ASL_U:TfHandShape.ASL_U,ASL_U_THUMB_FORWARD:TfHandShape.ASL_U_THUMB_FORWARD,ASL_U_THUMB_OUT:TfHandShape.ASL_U_THUMB_OUT,ASL_V_CIRCLE:TfHandShape.ASL_V_CIRCLE,ASL_X:TfHandShape.ASL_X,ASL_X_OVER_THUMB:TfHandShape.ASL_X_OVER_THUMB,ASL_X_THUMB_OUT:TfHandShape.ASL_X_THUMB_OUT,ASL_Y:TfHandShape.ASL_Y,ASL_Y_OPEN:TfHandShape.ASL_Y_OPEN,ASL_HORNS:TfHandShape.ASL_HORNS,ASL_ILY:TfHandShape.ASL_ILY,ASL_E_OPEN:TfHandShape.ASL_E_OPEN,ASL_H:TfHandShape.ASL_H,ASL_J:TfHandShape.ASL_J,ASL_P:TfHandShape.ASL_P,ASL_Q:TfHandShape.ASL_Q,ASL_Z:TfHandShape.ASL_Z,ASL_1_BACK:TfHandShape.ASL_1_BACK,ASL_2_BACK:TfHandShape.ASL_2_BACK,ASL_3_BACK:TfHandShape.ASL_3_BACK,ASL_4_BACK:TfHandShape.ASL_4_BACK,ASL_5_BACK:TfHandShape.ASL_5_BACK,META_B_DOWN:TfHandShape.META_B_DOWN,META_A_THUMBOUT:TfHandShape.META_A_THUMBOUT,META_B_BENT_IN:TfHandShape.META_B_BENT_IN,META_B_IN:TfHandShape.META_B_IN,META_B_IN_THUMBOUT:TfHandShape.META_B_IN_THUMBOUT,META_B_SIDE:TfHandShape.META_B_SIDE,META_B_SIDE_THUMBOUT:TfHandShape.META_B_SIDE_THUMBOUT,META_B_WAVE_IN:TfHandShape.META_B_WAVE_IN,META_B_WAVE_IN_THUMBOUT:TfHandShape.META_B_WAVE_IN_THUMBOUT,META_POINT_IN:TfHandShape.META_POINT_IN,ASL_6_BACK:TfHandShape.ASL_6_BACK,ASL_7_BACK:TfHandShape.ASL_7_BACK,ASL_8_BACK:TfHandShape.ASL_8_BACK,ASL_9_BACK:TfHandShape.ASL_9_BACK,ASL_4_MIR:TfHandShape.ASL_4_MIR,ASL_4_MIR_BACK:TfHandShape.ASL_4_MIR_BACK,ASL_FK:TfHandShape.ASL_FK,ASL_FK_BACK:TfHandShape.ASL_FK_BACK},sTfH2Fc={[TfHandShape.UNINITIALIZED]:[FingerspellCharacter.UNKNOWN],[TfHandShape.INVALID]:[FingerspellCharacter.UNKNOWN],[TfHandShape.OTHER]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_0_NUM]:[FingerspellCharacter.ASL_O,FingerspellCharacter.ASL_0],[TfHandShape.ASL_1_NUM]:[FingerspellCharacter.ASL_1],[TfHandShape.ASL_1_BENT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_1_BENT_THUMB_OUT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_2_NUM]:[FingerspellCharacter.ASL_V,FingerspellCharacter.ASL_2],[TfHandShape.ASL_3_NUM]:[FingerspellCharacter.ASL_3],[TfHandShape.ASL_3_CLOSED]:[FingerspellCharacter.ASL_H],[TfHandShape.ASL_4_NUM]:[FingerspellCharacter.ASL_4],[TfHandShape.ASL_5_NUM]:[FingerspellCharacter.ASL_5],[TfHandShape.ASL_5_CLAW]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_5_CLAW_THUMB_OUT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_6_NUM]:[FingerspellCharacter.ASL_W,FingerspellCharacter.ASL_6],[TfHandShape.ASL_6_CLOSED]:[FingerspellCharacter.ASL_W,FingerspellCharacter.ASL_6],[TfHandShape.ASL_7_NUM]:[FingerspellCharacter.ASL_7],[TfHandShape.ASL_8_NUM]:[FingerspellCharacter.ASL_8],[TfHandShape.ASL_9_FLAT]:[FingerspellCharacter.ASL_F,FingerspellCharacter.ASL_9],[TfHandShape.ASL_9_NUM]:[FingerspellCharacter.ASL_F,FingerspellCharacter.ASL_9],[TfHandShape.ASL_10]:[FingerspellCharacter.ASL_A,FingerspellCharacter.ASL_10],[TfHandShape.ASL_25]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_A]:[FingerspellCharacter.ASL_A],[TfHandShape.ASL_B]:[FingerspellCharacter.ASL_B],[TfHandShape.ASL_B_FLAT]:[FingerspellCharacter.ASL_B],[TfHandShape.ASL_B_THUMB_OUT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_B_BENT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_B_BENT_THUMB_OUT]:[FingerspellCharacter.ASL_G],[TfHandShape.ASL_C]:[FingerspellCharacter.ASL_C],[TfHandShape.ASL_D]:[FingerspellCharacter.ASL_D,FingerspellCharacter.ASL_1],[TfHandShape.ASL_E]:[FingerspellCharacter.ASL_E],[TfHandShape.ASL_E_THUMB_OUT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_G]:[FingerspellCharacter.ASL_G],[TfHandShape.ASL_G_CLOSED]:[FingerspellCharacter.ASL_O],[TfHandShape.ASL_G_INDEX_CURVED]:[FingerspellCharacter.ASL_G],[TfHandShape.ASL_G_OPEN]:[FingerspellCharacter.ASL_L],[TfHandShape.ASL_I]:[FingerspellCharacter.ASL_I],[TfHandShape.ASL_K]:[FingerspellCharacter.ASL_K],[TfHandShape.ASL_L]:[FingerspellCharacter.ASL_L],[TfHandShape.ASL_M]:[FingerspellCharacter.ASL_M],[TfHandShape.ASL_M_OPEN]:[FingerspellCharacter.ASL_M],[TfHandShape.ASL_N]:[FingerspellCharacter.ASL_N],[TfHandShape.ASL_N_OPEN]:[FingerspellCharacter.ASL_N],[TfHandShape.ASL_O_FLAT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_R]:[FingerspellCharacter.ASL_R],[TfHandShape.ASL_R_THUMB_OUT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_S]:[FingerspellCharacter.ASL_S],[TfHandShape.ASL_T]:[FingerspellCharacter.ASL_T],[TfHandShape.ASL_U]:[FingerspellCharacter.ASL_U],[TfHandShape.ASL_U_THUMB_FORWARD]:[FingerspellCharacter.ASL_U],[TfHandShape.ASL_U_THUMB_OUT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_V_CIRCLE]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_X]:[FingerspellCharacter.ASL_X],[TfHandShape.ASL_X_OVER_THUMB]:[FingerspellCharacter.ASL_T],[TfHandShape.ASL_X_THUMB_OUT]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_Y]:[FingerspellCharacter.ASL_Y],[TfHandShape.ASL_Y_OPEN]:[FingerspellCharacter.ASL_Y],[TfHandShape.ASL_HORNS]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_ILY]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_E_OPEN]:[FingerspellCharacter.ASL_E],[TfHandShape.ASL_H]:[FingerspellCharacter.ASL_H],[TfHandShape.ASL_J]:[FingerspellCharacter.ASL_J],[TfHandShape.ASL_P]:[FingerspellCharacter.ASL_P],[TfHandShape.ASL_Q]:[FingerspellCharacter.ASL_Q],[TfHandShape.ASL_Z]:[FingerspellCharacter.ASL_Z],[TfHandShape.ASL_1_BACK]:[FingerspellCharacter.ASL_1_BACK],[TfHandShape.ASL_2_BACK]:[FingerspellCharacter.ASL_2_BACK],[TfHandShape.ASL_3_BACK]:[FingerspellCharacter.ASL_3_BACK],[TfHandShape.ASL_4_BACK]:[FingerspellCharacter.ASL_4_BACK],[TfHandShape.ASL_5_BACK]:[FingerspellCharacter.ASL_5_BACK],[TfHandShape.META_B_DOWN]:[FingerspellCharacter.META_B_DOWN],[TfHandShape.META_A_THUMBOUT]:[FingerspellCharacter.META_A_THUMBOUT],[TfHandShape.META_B_BENT_IN]:[FingerspellCharacter.META_B_BENT_IN],[TfHandShape.META_B_IN]:[FingerspellCharacter.META_B_IN],[TfHandShape.META_B_IN_THUMBOUT]:[FingerspellCharacter.META_B_IN_THUMBOUT],[TfHandShape.META_B_SIDE]:[FingerspellCharacter.META_B_SIDE],[TfHandShape.META_B_SIDE_THUMBOUT]:[FingerspellCharacter.META_B_SIDE_THUMBOUT],[TfHandShape.META_B_WAVE_IN]:[FingerspellCharacter.META_B_WAVE_IN],[TfHandShape.META_B_WAVE_IN_THUMBOUT]:[FingerspellCharacter.META_B_WAVE_IN_THUMBOUT],[TfHandShape.META_POINT_IN]:[FingerspellCharacter.META_POINT_IN],[TfHandShape.ASL_6_BACK]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_7_BACK]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_8_BACK]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_9_BACK]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_4_MIR]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_4_MIR_BACK]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_FK]:[FingerspellCharacter.UNKNOWN],[TfHandShape.ASL_FK_BACK]:[FingerspellCharacter.UNKNOWN]};function FrameDetection(){this.detection=null}FrameDetection.prototype={constructor:FrameDetection.prototype.constructor,clear:function clear(){this.detection=null},isEmpty:function isEmpty(){return null===this.detection},equals:function equals(_){return Util.assert("FrameDetection"==Util.myTypeOf(_)),!this.isEmpty()&&this.detection===_.detection},copy:function copy(_){return Util.assert("FrameDetection"==Util.myTypeOf(_)),this.detection=_.detection}};const CoolDownState={NONE:0,IN_PROGRESS:1,ELAPSED:2};function PositionData(t,e){Util.assert(Util.isType(t,"number")),Util.assert(Util.isObject(e)),this.timestamp=void 0!==t?t:0,this.position=void 0!==e?Util.vec2clone(e):new vec2(0,0)}function ZCharacterDetector(t,e,i){this.useOptimization=void 0!==i&&i,this.currentTs=-1,this.currentScale=-1,this.lastDetectionTs=-1,this.indexFingertipMarkers=null,this.extractedData=null,this.segments=[],this.maxZigZagCount=0,this.positions_for_extractData=null,this.detectionInterval=void 0!==t?t:1e3,this.averageWindow=void 0!==e?e:100,this.init()}function FingerspellCharacterHelper(){}function FingerspellLogic(t,e,i,r,s){this.minHandshapeScore=.6,this.mode=FingerspellRecognitionMode.DictionaryMatching,this.characterSequence=[],this.prevCharacter=new FrameDetection,this.minOccurrence=void 0!==t?t:4,this.repeatAfter=void 0===e||0===e?0:Math.max(e,this.minOccurrence),this.occurrenceCounter=0,this.continuationCounter=0,this.minUnknown=2,this.lastMatchedWord=null,this.avgPalmWidth=new MovingAverage(100),this.palmWidthInM=.065,this.maxSequenceLength=256,this.possibleZHandshapes=[TfHandShape.ASL_1_NUM,TfHandShape.ASL_D,TfHandShape.ASL_K,TfHandShape.ASL_1_BENT,TfHandShape.ASL_Z,TfHandShape.ASL_X,TfHandShape.ASL_X_OVER_THUMB,TfHandShape.ASL_R,TfHandShape.ASL_P],this.zCharacterDetector=new ZCharacterDetector(i,r,s),this.zCount=0}ZCharacterDetector.Data=function Data(t,e,i,r){Util.assert(Util.isType(t,"number")),Util.assert(Util.isObject(e)),Util.assert(Util.isType(i,"boolean")),Util.assert(Util.isType(r,"number")),this.timestamp=void 0!==t?t:0,this.markerPosition=void 0!==e?Util.vec2clone(e):new vec2(0,0),this.isZ=void 0!==i&&i,this.scale=r},ZCharacterDetector.FilteredData=function FilteredData(){this.timestamp=0,this.position=new vec2(0,0),this.velocity=new vec2(0,0),this.isZ=!1},ZCharacterDetector.Segment=function Segment(t,e,i){Util.assert(Util.isType(t,"Interval")),Util.assert(Util.isObject(e)),Util.assert(Util.isObject(i)),this.interval=void 0!==t?t:new Interval(0,0),this.startPosition=void 0!==e?Util.vec2clone(e):new vec2(0,0),this.endPosition=void 0!==i?Util.vec2clone(i):new vec2(0,0),this.dir=new vec2(0,0),this.isValidX=!1,this.isValidY=!1,this.validCharacterRatio=0,this.tmpRatio=0,this.isValidCharacterRatio=!1,this.isChecked=!1,this.usedForCharacter=!1,this.zigZagIndex=-1},ZCharacterDetector.prototype={constructor:ZCharacterDetector.prototype.constructor,init:function init(){var t=Math.ceil(1.1*this.detectionInterval/16);this.indexFingertipMarkers=new CircularBuffer(t),this.extractedData=new CircularBuffer(t),this.positions_for_extractData=new Array(this.indexFingertipMarkers.maxSize)},resetLastDetectionTime:function resetLastDetectionTime(){this.lastDetectionTs=-1},setLastDetectionTime:function setLastDetectionTime(t){Util.assert(Util.isType(t,"number")),this.lastDetectionTs=t},processCoolDown:function processCoolDown(t,e){Util.assert(Util.isType(t,"number")),Util.assert(Util.isHolderOf(e,"boolean"));var i=this.checkCoolDown(t);e.get()&&(i==CoolDownState.NONE?this.setLastDetectionTime(t):i==CoolDownState.IN_PROGRESS&&e.set(!1)),i==CoolDownState.ELAPSED&&(this.resetLastDetectionTime(),this.reset(),e.set(!1))},checkCoolDown:function checkCoolDown(t){Util.assert(Util.isType(t,"number"));return this.lastDetectionTs<0?CoolDownState.NONE:t-this.lastDetectionTs>500?CoolDownState.ELAPSED:CoolDownState.IN_PROGRESS},calculateMotionData:function calculateMotionData(t,e,i,r,s){Util.assert(Util.isArrayOf(t,"PositionData"),Util.myTypeOf(t)+" "+Util.arrayTypeOf(t)),Util.assert(Util.isObject(i)),Util.assert(Util.isObject(r)),Util.assert(Util.isType(s,"number")),Util.assert(Util.isType(e,"number")),Util.assert(e<=t.length);if(e<3)return Util.vec2set(i,0,0),Util.vec2set(r,0,0),!1;for(var a=0,n=0,o=0;o<e;++o)a+=t[o].position.x,n+=t[o].position.y;Util.vec2set(i,a/e,n/e);const c=t[0],l=t[e-1];var h=(l.timestamp-c.timestamp)*s;return Util.vec2set(r,(l.position.x-c.position.x)/h,(l.position.y-c.position.y)/h),!0},reset:function reset(){this.resetLastDetectionTime(),this.indexFingertipMarkers.clear(),this.extractedData.clear()},isPossible:function isPossible(){return this.maxZigZagCount>0},isDetected:function isDetected(t,e,i,r,s){Util.assert(Util.isType(t,"number")),Util.assert(Util.isType(e,"FingerspellDetections")),Util.assert(Util.isObject(i)),Util.assert(Util.isType(s,"number")),this.currentTs=t,this.currentScale=s;var a=-1!=Util.findIndex(e.all,(function(t){return t.character==FingerspellCharacter.ASL_Z}));return this.addData(t,i,a,s),this.detect(t,r)},addData:function addData(t,e,i,r){Util.assert(Util.isType(t,"number")),Util.assert(Util.isObject(e)),Util.assert(Util.isType(i,"boolean"),Util.myTypeOf(i)),this.indexFingertipMarkers.push_back_auto(new ZCharacterDetector.Data(t,e,i,r))},detect:function detect(t,e){Util.assert(Util.isType(t,"number")),this.updateWindow(t),this.extractData(),this.detectSegments();var i=new Holder("boolean",!1);return i.set(this.evaluateSegments(e)),this.processCoolDown(t,i),i.get()},updateWindow:function updateWindow(t){Util.assert(Util.isType(t,"number"));var e=t-this.detectionInterval,forgetOldElements=function(t,e){Util.assert(Util.isType(t,"CircularBuffer"));for(var i=Util.findIndex_circBuf(t,(function(t){return t.timestamp>=e}));i-- >0;)t.pop_front()};forgetOldElements(this.indexFingertipMarkers,e),forgetOldElements(this.extractedData,e)},extractData:function extractData(){const t=this.averageWindow/2;if(!this.useOptimization){Util.log("performing FULL scan, buffer length="+this.indexFingertipMarkers.size()),this.extractedData.clear();for(var e=0;e<this.indexFingertipMarkers.size();++e){var i=0;const o=this.indexFingertipMarkers.get(e);for(var r=(d=o.timestamp)-t,s=d+t,a=0;a<this.indexFingertipMarkers.size();++a){const t=this.indexFingertipMarkers.get(a);if(!((f=t.timestamp)<r)){if(f>s)break;this.positions_for_extractData[i++]=new PositionData(f,t.markerPosition.uniformScale(this.currentScale))}}var n=new ZCharacterDetector.FilteredData;this.calculateMotionData(this.positions_for_extractData,i,n.position,n.velocity,.001)&&(n.timestamp=d,n.isZ=o.isZ,this.extractedData.push_back_auto(n))}}else{for(var o=this.currentTs-t,c=this.currentTs-this.averageWindow,l=Util.findLastIndex_circBuf(this.extractedData,(function(t){return t.timestamp<o})),h=this.extractedData.size()-l-1;h-- >0;)this.extractedData.pop_back();var p=Util.findLastIndex_circBuf(this.indexFingertipMarkers,(function(t){return t.timestamp<o}));p=-1!=p?Math.min(this.indexFingertipMarkers.size()-1,p+1):0;var u=Util.findLastIndex_circBuf(this.indexFingertipMarkers,(function(t){return t.timestamp<c}));u=-1!=u?Math.min(this.indexFingertipMarkers.size()-1,u+1):0;for(e=p;e<this.indexFingertipMarkers.size();++e){i=0;const o=this.indexFingertipMarkers.get(e);var d;for(r=(d=o.timestamp)-t,s=d+t,a=u;a<this.indexFingertipMarkers.size();++a){const t=this.indexFingertipMarkers.get(a);var f;if(!((f=t.timestamp)<r)){if(f>s)break;this.positions_for_extractData[i++]=new PositionData(f,t.markerPosition.uniformScale(t.scale))}}n=new ZCharacterDetector.FilteredData;this.calculateMotionData(this.positions_for_extractData,i,n.position,n.velocity,.001)&&(n.timestamp=d,n.isZ=o.isZ,this.extractedData.push_back_auto(n))}}},detectSegments:function detectSegments(){var t=0;this.segments=[];var start=function(t,e){Util.assert(Util.isType(t,"ZCharacterDetector")),Util.assert(Util.isType(e,"FilteredData")),t.segments.push(new ZCharacterDetector.Segment(new Interval(e.timestamp,0),e.position,new vec2(0,0)))},e=0,i=0;for(var end_=function(t,r){Util.assert(Util.isType(t,"ZCharacterDetector")),Util.assert(Util.isType(r,"FilteredData"));var s=t.segments[t.segments.length-1];s.interval.end=r.timestamp,s.endPosition=r.position;var a=i/e;s.validCharacterRatio=a,s.tmpRatio=a,s.isValidCharacterRatio=a>=.3,i=e=0},r=0;r<this.extractedData.size();++r){var s=this.extractedData.get(r);const n=s.velocity.x;if(Math.abs(n)<.1)0!=t&&(end_(this,s),t=0);else{0==t&&start(this,s);var a=n>0?1:-1;0!=t&&t!=a&&(end_(this,s),start(this,s)),++e,s.isZ&&++i,t=a}}this.segments.length>0&&0==this.segments[this.segments.length-1].interval.end&&this.segments.pop()},evaluateSegments:function evaluateSegments(t){var e=0,i=0,r=0;this.maxZigZagCount=0;for(var s=0,a=!1,n=[],o=this.segments.length-1;o>=0;--o){var c=this.segments[o],l=c.endPosition.sub(c.startPosition),h=l.x>0?1:-1;c.dir=l.normalize(),c.isValidX=Math.abs(l.x)>.01;var p=t==HandSide.RIGHT&&1==h||t==HandSide.LEFT&&-1==h;if(c.isValidY=-l.y<(p?-.02:.02),c.isChecked=!0,c.isValidX&&c.isValidY)if(r!=h){if(0==r){if(!(t==HandSide.RIGHT&&-1==h||t==HandSide.LEFT&&1==h))continue;n=[o],e=1,s=c.validCharacterRatio}else i>1?(n=[o],e=1,s=c.validCharacterRatio):(++e,s+=c.validCharacterRatio,n.push(o)),3==e&&s/e>.1&&(a=!0);if(this.maxZigZagCount=Math.max(e,this.maxZigZagCount),c.zigZagIndex=e,a)break;r=h,i=0}else++i;else++i}if(3==n.length)for(var u=0;u<n.length;++u){o=n[u];this.segments[o].usedForCharacter=!0}return a}},FingerspellCharacterHelper.toFingerspellCharacter=function toFingerspellCharacter(t,e,i){var r=e[t];Util.assert(void 0!==r,sTfH2Name[t]+" ("+t+") not found in mapping!"),Util.assert(r instanceof Array),Util.assert(r.length>0,"FingerspellCharacter vector for TfHandshape "+sTfH2Name[t]+" is empty in mapping!");var s=Util.filter(r,i?function(t){return isFingerspellCharacterNumber(t)}:function(t){return!isFingerspellCharacterNumber(t)});return Util.assert(s.length<=1),0==s.length?FingerspellCharacter.UNKNOWN:s[0]},FingerspellLogic.prototype={constructor:FingerspellLogic.prototype.constructor,getSortedScores:function getSortedScores(t){return Util.assert(Util.isArrayOf(t,"Pair")),t.sort((function(t,e){return Math.sign(t.score-e.score)}))},selectHandShape:function selectHandShape(t,e){Util.assert(Util.isArrayOf(t,"Pair"));var i=function(e,i){Util.assert(Util.isType(e,"FingerspellLogic")),Util.assert(Util.isArrayOf(i,"Pair"));var r=TfHandShape.UNINITIALIZED;if(t.length>0){const i=e.getSortedScores(t);r=i[0].second>=e.minHandshapeScore?i[0].first:TfHandShape.UNINITIALIZED}return r}(this,t),r=i,s=FingerspellCharacterHelper.toFingerspellCharacter(i,sTfH2Fc,e),a=new FingerspellDetections;return s!=FingerspellCharacter.UNKNOWN&&(a.best=new FingerspellDetection(s,1),a.all.push(a.best)),new Pair(r,a)},createInputForMovingCharacterDetections:function createInputForMovingCharacterDetections(t){Util.assert(Util.isArrayOfObject(t));var e=HandLandmarkType.INDEX_0,i=HandLandmarkType.PINKY_0,r=t[e],s=t[i],a=r.distance(s);return this.avgPalmWidth.add(a),this.palmWidthInM/this.avgPalmWidth.get()},checkZDetection:function checkZDetection(t,e,i,r,s,a){Util.assert(Util.isType(t,"number")),Util.assert(Util.isArrayOfObject(e)),Util.assert(Util.isType(i,"number")),Util.assert(Util.isType(a,"FingerspellDetections"));var n=new FingerspellDetections;0!=this.possibleZHandshapes.length&&void 0===Util.find(this.possibleZHandshapes,(function(t){return t==s}))||n.all.push(new FingerspellDetection(FingerspellCharacter.ASL_Z,1));var o=e[HandLandmarkType.INDEX_3],c=this.zCharacterDetector.isDetected(t,n,o,r,i);return c&&(a.all=[],a.best=new FingerspellDetection(FingerspellCharacter.ASL_Z,1),a.all.push(a.best)),c},bufferFrameDetection:function bufferFrameDetection(t){Util.assert("FingerspellDetections"==Util.myTypeOf(t)),Util.assert(this.characterSequence instanceof Array);var e=new FrameDetection,i=!1;t.best.isValid()&&(t.best.character==FingerspellCharacter.ASL_Z&&(i=!0),e.detection=t.best.character);var r=!1,s=!1;if(e.isEmpty()?(++this.unknownCounter,this.unknownCounter>=this.minUnknown&&(this.occurrenceCounter=0)):(this.unknownCounter=0,i||(this.characterSequence.length>0&&this.characterSequence[this.characterSequence.length-1].equals(e)?this.repeatAfter>0&&(this.continuationCounter+1<this.repeatAfter?++this.continuationCounter:s=!0):this.minOccurrence>0?this.prevCharacter.equals(e)?this.occurrenceCounter+1<this.minOccurrence?++this.occurrenceCounter:r=!0:(this.occurrenceCounter=1,this.prevCharacter.copy(e)):r=!0)),r||s||i){this.occurrenceCounter=0,this.continuationCounter=0,this.prevCharacter.clear(),this.characterSequence.length>this.maxSequenceLength&&(this.characterSequence=[]),this.characterSequence.push(e),script.api.onNewChar&&script.api.onNewChar(this.getDetectionChar()),script.printLog&&Util.log("|"+this.characterSequence.length+"|: "+this.getDetectionBufferAsWord());if(!1){var a=this.zCharacterDetector;a.indexFingertipMarkers.size()>=2&&Util.log("indexFingertipMarkers length: "+a.indexFingertipMarkers.size()+", span: "+(a.indexFingertipMarkers.back().timestamp-a.indexFingertipMarkers.front().timestamp)+", delta: "+(a.indexFingertipMarkers.get(1).timestamp-a.indexFingertipMarkers.get(0).timestamp))}}},getDetectionBufferAsWord:function getDetectionBufferAsWord(){return Util.accumulate(this.characterSequence,"",(function(t,e){return t+Util.removePrefix(sFc2Name[e.detection],"ASL_")}))},getDetectionChar:function getDetectionChar(){return this.characterSequence.length>0?Util.removePrefix(""+sFc2Name[this.characterSequence[this.characterSequence.length-1].detection],"ASL_"):""},handNotPresent:function handNotPresent(t){Util.assert(Util.isOptType(t,"boolean")),this.characterSequence=[],this.prevCharacter.clear(),this.occurrenceCounter=0,this.continuationCounter=0,this.unknownCounter=0,this.zCharacterDetector.reset()},process:function process(t,e,i,r,s,a){Util.assert(Util.isType(t,"number")&&t!==HandSide.NOT_DEFINED),Util.assert(Util.isArrayOfObject(e)),Util.assert(Util.isArrayOf(r,"Classification")),Util.assert(Util.isType(s,"Boolean")),Util.assert(Util.isType(a,"Boolean"));for(var n=[],o=0;o<r.length;o++)n.push(new Pair(sName2TfH[r[o].label],r[o].score));var c=this.selectHandShape(n,s);Util.assert(Util.isType(c,"Pair"));var l=c.first,h=c.second;if(a){var p=this.createInputForMovingCharacterDetections(e);this.checkZDetection(i,e,p,t,l,h)}this.bufferFrameDetection(h)}};const CENTER=vec2.zero(),FULL_HAND_IDs=["Center","Wrist","Index0","Index1","Index2","Index3","Middle0","Middle1","Middle2","Middle3","Ring0","Ring1","Ring2","Ring3","Pinky0","Pinky1","Pinky2","Pinky3","Thumb0","Thumb1","Thumb2","Thumb3"],MAIN_POINTS_IDs=["Center","Wrist"];var HandJointTracking=function(){this.wasTracking=!1,this.side=void 0;for(var t=0;t<MAIN_POINTS_IDs.length;t++){var e=MAIN_POINTS_IDs[t];script[e]||print("ERROR, Please set ["+e+"] tracking under the joints tab")}for(var i=0;i<FULL_HAND_IDs.length;i++){var n=FULL_HAND_IDs[i];script[n]?this[n]=new HandPoint(n,script[n]):print("ERROR, Please set ["+e+"] tracking under the joints tab")}this.isTracking=function(){for(var t=0;t<MAIN_POINTS_IDs.length;t++)if(!this[MAIN_POINTS_IDs[t]]||!this[MAIN_POINTS_IDs[t]].isTracking())return!1;return!0},this.getHandSize=function(){return this.Center.getLocalPosition().distance(this.Wrist.getLocalPosition())},this.isLeftHand=function(){return this.Center.objectTracking.objectSpecificData.isLeft}};function HandPoint(t,e){this.name=t,this.objectTracking=e,this.screenTransform=e.getSceneObject().getFirstComponent("ScreenTransform")}function FingerspellDetector(){this.typeName="FingerspellDetector",this.version=[0,6,0],this.zUseOptimization=!0,this.jointTracking=null,this.cameraShowsMirroredImage=!0,this.aspectRatio=void 0,this.mlComponent=null,this.modelInputName="x",this.modelOutputName="sequential/dense_6/Softmax",this.deltatimeAvg=null,this.deltatime2_arr=null,this.deltatime2_cnt=0,this.deltatime2_avg=0,this.jointPretransform=null,this.tensorsToClassification=null,this.fingerspellLogic=null,this.stored_fps="",this.handSide=HandSide.NOT_DEFINED,this.handSide_toString=["L","R","U"],this.numericMode=!1,this.numJoints=21,this.joints_imageSpace=[],this.joints_pretransformed_cb=null,this.jointsFlattened=null,this.lastHandPresent=!1,this.init()}HandPoint.prototype.isTracking=function(){return this.objectTracking.isTracking()},HandPoint.prototype.getWorldPosition=function(){return this.screenTransform.localPointToWorldPoint(CENTER)},HandPoint.prototype.getScreenPosition=function(){return this.screenTransform.localPointToScreenPoint(CENTER)},HandPoint.prototype.getLocalPosition=function(){return this.screenTransform.anchors.getCenter()},FingerspellDetector.prototype.init=function(){this.numericMode=0==script.numericMode,this.joints_imageSpace=new Array(this.numJoints);this.joints_pretransformed_cb=new CircularBuffer(3);for(var t=0;t<this.joints_pretransformed_cb.maxSize;++t){this.joints_pretransformed_cb.elements[t]=new Array(this.numJoints);for(var e=0;e<this.numJoints;++e)this.joints_pretransformed_cb.elements[t][e]=new vec2(0,0)}for(t=0;t<this.numJoints;++t)this.joints_imageSpace[t]=new vec2(0,0);this.jointsFlattened=new Array(2*this.numJoints*3),this.deltatime2_arr=new Array(15),this.jointTracking=new HandJointTracking,this.jointPretransform=new JointPretransform,this.tensorsToClassification=new TensorsToClassification,this.fingerspellLogic=new FingerspellLogic(script.minOccurrence,script.repeatAfter,script.zDetectionInterval,script.zAverageWindow,this.zUseOptimization),this.buildModel()},FingerspellDetector.prototype.getVersionText=function(){const t=this.version;return"v"+t[0]+"."+t[1]+(0!=t[2]?"."+t[2]:"")},FingerspellDetector.prototype.run=function(){if(null==this.aspectRatio&&(this.aspectRatio=script.camera.aspect),this.deltatime2_arr[this.deltatime2_cnt++]=getDeltaTime(),this.deltatime2_cnt>=this.deltatime2_arr.length){this.deltatime2_cnt=0;var t=Util.accumulate(this.deltatime2_arr,0,(function(t,e){return t+e})),e=""+Util.prec(this.deltatime2_arr.length/t,1);-1==Util.findIndex(e,(function(t){return"."==t}))&&(e+=".0"),this.stored_fps=e}var i=this.jointTracking.isTracking();i&&this.validRun(),this.lastHandPresent=i},FingerspellDetector.prototype.getHandSide=function(){var t=this.jointTracking.isLeftHand();return null===t?HandSide.NOT_DEFINED:(this.cameraShowsMirroredImage?!t:t)?HandSide.LEFT:HandSide.RIGHT},FingerspellDetector.prototype.validRun=function(){var t=this.jointTracking;this.handSide=this.getHandSide(),Util.vec2set(this.joints_imageSpace[0],t.Wrist.getScreenPosition()),Util.vec2set(this.joints_imageSpace[1],t.Thumb3.getScreenPosition()),Util.vec2set(this.joints_imageSpace[2],t.Thumb2.getScreenPosition()),Util.vec2set(this.joints_imageSpace[3],t.Thumb1.getScreenPosition()),Util.vec2set(this.joints_imageSpace[4],t.Thumb0.getScreenPosition()),Util.vec2set(this.joints_imageSpace[5],t.Index3.getScreenPosition()),Util.vec2set(this.joints_imageSpace[6],t.Index2.getScreenPosition()),Util.vec2set(this.joints_imageSpace[7],t.Index1.getScreenPosition()),Util.vec2set(this.joints_imageSpace[8],t.Index0.getScreenPosition()),Util.vec2set(this.joints_imageSpace[9],t.Middle3.getScreenPosition()),Util.vec2set(this.joints_imageSpace[10],t.Middle2.getScreenPosition()),Util.vec2set(this.joints_imageSpace[11],t.Middle1.getScreenPosition()),Util.vec2set(this.joints_imageSpace[12],t.Middle0.getScreenPosition()),Util.vec2set(this.joints_imageSpace[13],t.Ring3.getScreenPosition()),Util.vec2set(this.joints_imageSpace[14],t.Ring2.getScreenPosition()),Util.vec2set(this.joints_imageSpace[15],t.Ring1.getScreenPosition()),Util.vec2set(this.joints_imageSpace[16],t.Ring0.getScreenPosition()),Util.vec2set(this.joints_imageSpace[17],t.Pinky3.getScreenPosition()),Util.vec2set(this.joints_imageSpace[18],t.Pinky2.getScreenPosition()),Util.vec2set(this.joints_imageSpace[19],t.Pinky1.getScreenPosition()),Util.vec2set(this.joints_imageSpace[20],t.Pinky0.getScreenPosition());for(var e=0;e<this.joints_imageSpace.length;++e)this.joints_imageSpace[e].x*=this.cameraShowsMirroredImage?-this.aspectRatio:this.aspectRatio;if(this.joints_pretransformed_cb.add_back_auto(),this.jointPretransform.process(this.handSide,this.joints_imageSpace,this.joints_pretransformed_cb.back()),this.joints_pretransformed_cb.full()){for(e=0;e<this.joints_pretransformed_cb.size();++e)Util.flattenVec2Arr_withOffset(this.joints_pretransformed_cb.get(e),this.jointsFlattened,2*e*this.numJoints);Object.assign(this.mlComponent.getInput(this.modelInputName).data,this.jointsFlattened),this.mlComponent.runImmediate(!0)}},FingerspellDetector.prototype.onRunningFinished=function(){var t=this.mlComponent.getOutput(this.modelOutputName).data,e=this.tensorsToClassification.process(t),i=1e3*getTime();this.fingerspellLogic.process(this.handSide,this.joints_imageSpace,i,e,this.numericMode,script.enableZDetection)},FingerspellDetector.prototype.buildModel=function(){this.mlComponent=script.getSceneObject().createComponent("MLComponent"),this.mlComponent.model=script.model;var t=this;this.mlComponent.onLoadingFinished=function(){script.createEvent("UpdateEvent").bind((function(){t.run()}))},this.mlComponent.onRunningFinished=function(){t.onRunningFinished()};var e=MachineLearning.createInputBuilder();e.setName(this.modelInputName),e.setShape(new vec3(42,3,1));var i=e.build(),n=MachineLearning.createOutputBuilder();n.setName(this.modelOutputName),n.setShape(new vec3(1,1,50)),n.setOutputMode(MachineLearning.OutputMode.Data);var s=n.build();this.mlComponent.build([i,s])};
/* eslint-enable */


function checkInputs() {
    if (!script.model) {
        print("ERROR, ml model asset is not set on " + script.getSceneObject().name);
        return false;
    }
    if (!script.camera) {
        print("ERROR, camera is not set on " + script.getSceneObject().name);
        return false;
    }
    return true;
}

if (checkInputs()) {
    new FingerspellDetector();
} else {
    print("ERROR, Script was not initialized properly");
}

// set api function
// script.api.onNewChar = myFunction;

